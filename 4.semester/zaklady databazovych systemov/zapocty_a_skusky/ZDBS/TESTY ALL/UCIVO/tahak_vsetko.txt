Vypise menny zoznam ucitelov:

select distinct meno, priezvisko 
from os_udaje, ucitel
where os_udaje.rod_cislo=ucitel.rod_cislo 



Majme nasledovný poh¾ad a príkaz Insert.
CREATE OR REPLACE VIEW pohl6 (meno, priezvisko,rod_cislo)
AS
SELECT ou_meno, ou_priezvisko, ou_rod_cislo FROM os_udaje
WHERE ou_meno LIKE 'S%';

INSERT INTO pohl6
VALUES ( 'Karol', 'Novy', '790502/1212');

Èo sa stane? 
riadok bude vložený do poh¾adu aj do tabu¾ky os_udaje


Vložte nasledovné dáta o uèite¾ovi meno=Peter, priezvisko=Kapusta, obec=1234, rod_cislo=120507/2541.
insert into os_udaje(meno,priezvisko,obec_id,rod_cislo)
values ('Peter','Kapusta',1234,'120507/2541');         


Ko¾ko primárnych k¾úèov má daná relácia?
Telefonny_hovor(id_hovoru, kedy, cislo_kto, cislo_komu dlzka_hovoru).
Prièom uvažujeme len s možnosou, že z jedného telefónu nie je možné naraz vola na viac a kedy obsahuje aj dátum aj èas. 
viac ako 3 PK



Vypíšte email na štúdijné oddelenie Fakulty riadenia a informatiky v školskom roku 2003.
select email_stud from info
where skrok=2003


Urèite miesta, kde je porušená integrita entít
Chyba id_citatel v tabulke citatel 3.riadok
chybaju os_cisla v tabulke citatel v 2. a 5.  riadku
chyba  atribut nazov v tabulke kniha 3.riadok
chyba id_knihy v tabulke vypozicky v 3. riadku



Vypíšte zoznam katedier, z ktorých máme aspoò jedného uèite¾a (potlaète duplicity)
select distinct nazov,ucitel.cis_kat from katedra,ucitel 
where ucitel.cis_kat = katedra.cis_kat;


Vymažte všetky údaje o fakultách, ktoré nemajú ani jednu katedru
delete from fakulta
where fakulta.id not in
(select id from katedra) 




Vypíšte názvy fakúlt, ktoré viac ako 3 katedry.
select nazov,count(*) pocet from fakulta,katedra
where fakulta.id = katedra.id 
group by nazov having count(*)>3;



Aký bude výsledok z nasledovného selectu.
SELECT count(*) FROM Kniha
GROUP BY pocet_kusov; 
4

Majme nasledovný trigger, ktorý má automaticky nastavi atribúty uziv a datum hodnotami kto a kedy naposledy menil daný riadok.
CREATE OR REPLACE TRIGGER zap_predmety_log
......... INSERT OR UPDATE ON zap_predmety
REFERENCING new as novy
FOR EACH ROW
BEGIN
  select user, sysdate into :novy.uziv, :novy.datum_zm from dual;
END;

Doplòte do tela triggra ? 
BEFORE alebo AFTER



Vypíšte zoznam obcí, z ktorých máme aspoò jedného uèite¾a. (potlaète duplicity)

select distinct nazov, count(*) 
from obec, os_udaje, ucitel 
where obec.id=os_udaje.obec_id 
and
os_udaje.rod_cislo=ucitel.rod_cislo
having count>0 


Zistite priemernú dåžku pracovných pomerov uèite¾ov.
select avg(nvl(datum_ukoncenia,SYSDATE) - datum_nastupu) 
from ucitel
group by datum_nastupu, datum_ukoncenia


Aký bude výsledok z nasledovného selectu.
SELECT count(*) FROM Kniha
GROUP BY pocet_kusov; 

bude to pocet vsetkych udajov(zaznamov) ktore su v tabulke kniha


Vypíšte menný zoznam uèite¾ov, na ktorých nemáme žiaden kontakt.
select meno, priezvisko
from os_udaje
where os_udaje.rod_cislo not in
(select rod_cislo from kontakty) 



Vypíšte názvy okresov, z ktorých máme najviac uèite¾ov.
select okres,max(okres) 
from obec, os_udaje, ucitel
where obec.okres=os_udaje.obec_id and
os_udaje.rod_cislo=ucitel,rod_cislo
order by max 

Majme nasledovný poh¾ad a príkaz Insert.
CREATE OR REPLACE VIEW pohl6 (meno, priezvisko,rod_cislo)
AS
SELECT ou_meno, ou_priezvisko, ou_rod_cislo FROM os_udaje
WHERE ou_meno LIKE 'S%';

INSERT INTO pohl6
VALUES ( 'Karol', 'Novy', '790502/1212');

Èo sa stane? 
riadok bude vložený iba do tabu¾ky os_udaje



Èo znamená ak je nastavené ? 
ALTER TABLE os_udaje
   ADD (FOREIGN KEY (obec_id) REFERENCES obec(id) ON UPDATE RESTRICTED); 
operácia UPDATE atribútu obec_id v relácii os_udaje bude zamietnutá,
pokia¾ existuje aspoò jeden riadok v relácii obec s hodnotou id zhodnou s hodnotou obec_id


Vypíšte menný zoznam uèite¾ov z Fakulty prírodných vied.
select os_udaje.meno,os_udaje.priezvisko from os_udaje,katedra,fakulta,ucitel
where os_udaje.rod_cislo=ucitel.rod_cislo and 
kateda.cis_katedry=fakulta.id 
and fakulta.nazov='Fakulty prírodných vied';


Vypíšte zoznam katedier, z ktorých máme aspoò jedného uèite¾a (potlaète duplicity)
select distinct nazov,count(*) from ucitel,katedra where katedra.cis=ucitel.cis_kat having count(>0);



Vložte nové katedry do databázy z pomocnej tabu¾ky pom_kat, ktorá má rovnakú štruktúru dát
ako katedra a máte zaruèené, že tam nie sú žiadne duplicitné dáta.
insert into katedra(nazov,sekretariat) values (nazov,sekretariat);


Vypíšte názvy katedier s poètom uèite¾ov na katedre
select katedra.nazov,count(*) from katedra,ucitel
where katedra.cis_kat=ucitel.cis_kat group by katedra.nazov;


Aký bude výsledok z nasledovného selectu.
SELECT count(*) FROM Citatel, Vypozicky
WHERE citatel.cislo_citatela = vypozicky.cislo_citatela 
GROUP BY vypozicky.cislo_citatela
vypis pocet poziciek pre kazdeho citatela



Zmeòte telefón Fakulty riadenia a informatiky v aktuálnom šk. roku na 041/5134001.
update info set telefon='041/5134001' where skrok = TO_DATE (sysdate'YYYY') or skrok=(to_date(sysdate'YYYY'))
select id from fakulta.nazov='Fakulta riadenia a informatiky';




Majme nasledovný trigger:
CREATE OR REPLACE TRIGGER t_log_zp
AFTER UPDATE ON zap_predmety
begin
  INSERT INTO log_table_zp
  VALUES (USER, SYSDATE);
END;
Ko¾ko riadkov bude vložených do tabu¾ky log_table, ak operácia Update zap_predmety modifikovala 10 riadkov? 

1 riadok


Majme nasledovný poh¾ad.
CREATE OR REPLACE VIEW pohl4 (meno, priezvisko, rocnik, os_cislo)
AS 
SELECT ou_meno, ou_priezvisko, st_rocnik, st_os_cislo 
FROM os_udaje, student
WHERE ou_rod_cislo = st_ou_rod_cislo;

Aký typ triggra je potrebné definova, aby operácia INSERT z poh¾adu fungovala korektne?
INSTEAD OF insert



Ko¾ko primárnych k¾úèov má daná relácia? 
Rezervacia_izby(cislo_rezervacie, objednavatel, cislo_izby, rezervacia_od, rezervacia_do, datum_rezervacie, zaloha)
jeden PK - PK=cislo_rezervacie



Urèite miesta, v ktorých je porušená Referenèná integrita.
1.v tabulke kniha je null hodnota v stlpci nazov, ajked je definovany ako not null

2.v tabulke citatel v stlpci os_cislo su 2 null hodnoty ajked je definovany ako not null

3. v tabulke kniha sa v klucovom atribute id_knihy nachadza hodnota K3 2x

4. v tabulke citatel sa v klucovom atribute id_citatel nachadza hodnota C5 2x


Vložte novú fakultu nazov=Fakulta humanitných vied pre Žilinskú univerzitu,
dekan= Peter Novotný (už je v databáze), telefon= 041/5134999

insert into fakulta(dekan,id,nazov,univerzita) 
select ucitel.cis_ucitel,'FHVZU','Fakulta humanitných vied','Žilinská univerzita' 
from ucitel,os_udaje where ucitel.rod_cislo=os_udaje.rod_cislo and os_udaje.meno='Peter' 
and os_udaje.priezvisko='Novotný';
insert into info(id,skrok,telefon) values('FHVZU',2004,'041/5134999');


Vypíšte názvy katedier s poètom uèite¾ov na katedre.
select katedra.nazov,count(*) from katedra,ucitel where katedra.cis_kat=ucitel.cis_kat
group by katedra.nazov


Vypíšte menný zoznam uèite¾ov, ktorí sú (alebo boli ) najdlhšie na Katedre informatiky
select os_udaje.meno,os_udaje.priezvisko,(nvl(ucitel.datum_ukoncenia,sysdate)-ucitel.datum_nastupu) as dni from 
os_udaje,ucitel,katedra where katedra.nazov='Katedra informatiky' and katedra.cis_kat=ucitel.cis_kat 
and os_udaje.rod_cislo=ucitel.rod_cislo order by dni desc


Aký bude výsledok z nasledovného selectu.
SELECT count(*) FROM Citatel, Vypozicky
WHERE citatel.cislo_citatela = vypozicky.cislo_citatela 
GROUP BY vypozicky.cislo_citatela; 
vypise pocet vypoziciek pre kazdeho citatela


Vypíšte menný zoznam uèite¾ov, na ktorých nemáme žiaden kontakt.
select meno,priezvisko from os_udaje,kontaky 
where os_udaje.rod_cislo=kontakty.rod_cislo and kontakty.kontakt is null


Zmeòte telefón Fakulty riadenia a informatiky v aktuálnom šk. roku na 041/5134001
update info set telefon='041/5134001' where skrok=TO_DATE(sysdate,'YYYY') and id in (select id from fakulta where nazov='Fakulta riadenia a informatiky')



Vypíšte názvy fakúlt, ktoré majú aspoò jednu katedru. (potlaète duplicity)
select fakulta.id,fakulta.nazov from fakulta,katedra where fakulta.id=katedra.id group by
fakulta.id,fakulta.nazov having count(*)>0



Vypíšte adresy uèite¾ov v tvare:
meno+1medzera+priezvisko, ulica, psc (1-3.znak +1medzera+4-5.znak)+2medzery+nazov obce. 
Dodržte presne poèet medzier a poèet výsledných ståpcov.

select os_udaje.meno||' '||os_udaje.priezvisko||','||os_udaje.ulica||','||substr(os_udaje.psc,0,3)||' '||substr(os_udaje.psc,3,2)||'  '||obec.nazov from os_udaje,obec where os_udaje.obec_id=obec.id